<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>markdown-it-admon-collapsible Demo</title>
  <link rel="stylesheet" href="styles/admonition.css">
  <style>
    body { font-family: sans-serif; margin: 2em; }
    textarea { width: 100%; height: 120px; margin-bottom: 1em; }
    #output { border: 1px solid #ccc; padding: 1em; min-height: 100px; background: #fafafa; }
  </style>
</head>
<body>
  <h1>markdown-it-admon-collapsible Demo</h1>
  <textarea id="input">???+ note
    This is a note

??? warning Custom Title
    This is a warning with a custom title


??? note "Outer Note"

    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
    nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
    massa, nec semper lorem quam in massa.

    !!! note "Inner Note"

        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
        nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
        massa, nec semper lorem quam in massa.  </textarea>
  <button onclick="renderMarkdown()">Render</button>
  <div id="output"></div>

  <!-- Load markdown-it -->
  <script src="node_modules/markdown-it/dist/markdown-it.min.js"></script>
  <!-- Load the browserified plugin -->
  <script src="dist/markdown-it-admon-collapsible.js"></script>
  <script>
    function renderMarkdown() {
      var md = window.markdownit();
      md.use(window.markdownitAdmonCollapsible);
      var input = document.getElementById('input').value;
      var html = md.render(input);
      document.getElementById('output').innerHTML = html;
      // Add toggle logic for collapsible blocks
      document.querySelectorAll('.collapsible .collapsible-toggle').forEach(function(btn) {
        btn.onclick = function(e) {
          e.stopPropagation();
          var block = btn.closest('.collapsible');
          block.classList.toggle('expanded');
          btn.innerHTML = block.classList.contains('expanded') ? '&#x2212;' : '&#x2b;';
        };
        // Set initial icon
        var block = btn.closest('.collapsible');
        btn.innerHTML = block.classList.contains('expanded') ? '&#x2212;' : '&#x2b;';
      });
    }
    // Initial render
    renderMarkdown();
  </script>
</body>
</html>
